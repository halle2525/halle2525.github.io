<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blackjack - Gamble to Win!</title>
<style>
  body { background:#fff; font-family:Arial, sans-serif; margin:0; padding:20px; }
  h1 { margin-top:0; }
  .bankroll { font-weight:bold; margin:10px 0; }
  .controls { margin:10px 0; }
  input[type=number] { width:80px; padding:5px; }
  button { margin:5px; padding:8px 14px; cursor:pointer; }
  .hand { display:flex; gap:8px; margin:10px 0; min-height:80px; }
  .card {
    width:60px; height:80px; border:1px solid #000; 
    display:flex; align-items:center; justify-content:center;
    font-weight:bold; font-size:20px; background:#fff;
    transition: transform 0.3s ease;
  }
  .hidden { background:#000; color:#000; }
  .message { font-weight:bold; margin:10px 0; min-height:24px; }
  a { display:inline-block; margin-top:20px; }
</style>
</head>
<body>
  <h1>Blackjack</h1>
  <div class="bankroll">Bankroll: $<span id="money">1000</span></div>

  <div class="controls">
    Bet: <input type="number" id="bet" min="1" step="1" value="10">
    <button id="deal">Deal</button>
    <button id="hit" disabled>Hit</button>
    <button id="stand" disabled>Stand</button>
    <button id="surrender" disabled>Surrender</button>
    <button id="next" disabled>Next Round</button>
  </div>

  <h3>Dealer</h3>
  <div class="hand" id="dealer"></div>
  <div>Total: <span id="dealerTotal">-</span></div>

  <h3>You</h3>
  <div class="hand" id="player"></div>
  <div>Total: <span id="playerTotal">-</span></div>

  <div class="message" id="msg"></div>

  <a href="index.html">Back to Menu</a>

<script>
let bankroll = 1000;
let deck = [];
let dealer = [];
let player = [];
let bet = 0;
let dealerHidden = true;
let roundOver = false;

const moneyEl = document.getElementById("money");
const betEl = document.getElementById("bet");
const msgEl = document.getElementById("msg");
const dealerEl = document.getElementById("dealer");
const playerEl = document.getElementById("player");
const dealerTotalEl = document.getElementById("dealerTotal");
const playerTotalEl = document.getElementById("playerTotal");

function newDeck(){
  const ranks=["A","K","Q","J","10","9","8","7","6","5","4","3","2"];
  const d=[];
  for(let i=0;i<4;i++){ for(let r of ranks) d.push(r); }
  for(let i=d.length-1;i>0;i--){ let j=Math.floor(Math.random()*(i+1)); [d[i],d[j]]=[d[j],d[i]]; }
  return d;
}
function value(r){ if(r==="A")return 11; if(["K","Q","J","10"].includes(r))return 10; return parseInt(r); }
function handValue(h){
  let t=0,a=0; for(let c of h){ t+=value(c); if(c==="A")a++; }
  while(t>21&&a>0){t-=10;a--;} return t;
}
function render(){
  dealerEl.innerHTML=""; playerEl.innerHTML="";
  dealer.forEach((c,i)=>{ 
    let div=document.createElement("div"); div.className="card";
    if(i===1 && dealerHidden){ div.classList.add("hidden"); div.textContent="?"; }
    else div.textContent=c;
    dealerEl.appendChild(div);
  });
  player.forEach(c=>{ let div=document.createElement("div"); div.className="card"; div.textContent=c; playerEl.appendChild(div); });
  playerTotalEl.textContent=handValue(player);
  dealerTotalEl.textContent=dealerHidden? "?": handValue(dealer);
  moneyEl.textContent=bankroll;
}
function setMsg(t){ msgEl.textContent=t; }

function start(){
  if(roundOver) return;
  bet=parseInt(betEl.value)||0;
  if(bet<1||bet>bankroll){ setMsg("Invalid bet"); return; }
  bankroll-=bet; dealer=[]; player=[]; dealerHidden=true;
  deck=newDeck(); player.push(deck.pop(),deck.pop()); dealer.push(deck.pop(),deck.pop());
  roundOver=false; render();
  document.getElementById("hit").disabled=false;
  document.getElementById("stand").disabled=false;
  document.getElementById("surrender").disabled=false;
  document.getElementById("deal").disabled=true;
  setMsg("Your turn");
  if(handValue(player)===21){ stand(); }
}
function hit(){
  if(roundOver) return;
  player.push(deck.pop()); render();
  if(handValue(player)>21){ stand(); }
}
function stand(){
  dealerHidden=false; render();
  let dVal=handValue(dealer);
  while(dVal<17){ dealer.push(deck.pop()); dVal=handValue(dealer); render(); }
  finish();
}
function surrender(){
  if(roundOver) return;
  dealerHidden=false;
  bankroll+=Math.floor(bet/2);
  setMsg("You surrendered. Half bet returned.");
  endRound();
}
function finish(){
  const p=handValue(player), d=handValue(dealer);
  let result="";
  if(p>21) result="Bust! You lose.";
  else if(d>21) { bankroll+=bet*2; result="Dealer busts! You win."; }
  else if(p>d){ bankroll+=bet*2; result="You win!"; }
  else if(p<d){ result="Dealer wins."; }
  else { bankroll+=bet; result="Push."; }
  setMsg(result);
  endRound();
}
function endRound(){
  render(); roundOver=true;
  document.getElementById("hit").disabled=true;
  document.getElementById("stand").disabled=true;
  document.getElementById("surrender").disabled=true;
  document.getElementById("deal").disabled=true;
  document.getElementById("next").disabled=false;
}
function nextRound(){
  bet=0; betEl.value=10; dealer=[]; player=[];
  dealerHidden=true; roundOver=false;
  dealerEl.innerHTML=""; playerEl.innerHTML="";
  dealerTotalEl.textContent="-"; playerTotalEl.textContent="-";
  setMsg(""); render();
  document.getElementById("deal").disabled=false;
  document.getElementById("next").disabled=true;
}

document.getElementById("deal").onclick=start;
document.getElementById("hit").onclick=hit;
document.getElementById("stand").onclick=stand;
document.getElementById("surrender").onclick=surrender;
document.getElementById("next").onclick=nextRound;
render();
</script>
</body>
</html>
